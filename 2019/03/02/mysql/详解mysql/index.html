<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"swiftist.cn","root":"/","scheme":"Pisces","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"appID":"EVBR3H53HW","apiKey":"2abd573a01143a0cc4108fa4d21ae67c","indexName":"swiftist","hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="MySQL 获取当前日期及日期格式获取系统日期： NOW() 格式化日期： DATE_FORMAT(date, format) 注： date：时间字段 format：日期格式 返回系统日期,输出 2009-12-25 14:38:59 1select now();  输出 09-12-25 1select date_format(now(),&#39;%y-%m-%d&#39;);  根据 format 字符串">
<meta property="og:type" content="article">
<meta property="og:title" content="详解mysql 获取当前日期及格式化">
<meta property="og:url" content="https://swiftist.cn/2019/03/02/mysql/%E8%AF%A6%E8%A7%A3mysql/index.html">
<meta property="og:site_name" content="飞雪轩辕">
<meta property="og:description" content="MySQL 获取当前日期及日期格式获取系统日期： NOW() 格式化日期： DATE_FORMAT(date, format) 注： date：时间字段 format：日期格式 返回系统日期,输出 2009-12-25 14:38:59 1select now();  输出 09-12-25 1select date_format(now(),&#39;%y-%m-%d&#39;);  根据 format 字符串">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-03-02T00:22:52.000Z">
<meta property="article:modified_time" content="2020-03-31T15:07:39.402Z">
<meta property="article:author" content="Andy Ge">
<meta property="article:tag" content="mysql">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://swiftist.cn/2019/03/02/mysql/%E8%AF%A6%E8%A7%A3mysql/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>详解mysql 获取当前日期及格式化 | 飞雪轩辕</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="飞雪轩辕" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">飞雪轩辕</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">人生的乐趣在于把梦想变成现实</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-java">

    <a href="/categories/java/" rel="section"><i class="fa fa-fw fa-th-large"></i>java</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swiftist.cn/2019/03/02/mysql/%E8%AF%A6%E8%A7%A3mysql/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Andy Ge">
      <meta itemprop="description" content="勇于积极进取，步入人生的世外桃源">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="飞雪轩辕">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          详解mysql 获取当前日期及格式化
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-03-02 08:22:52" itemprop="dateCreated datePublished" datetime="2019-03-02T08:22:52+08:00">2019-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-31 23:07:39" itemprop="dateModified" datetime="2020-03-31T23:07:39+08:00">2020-03-31</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/mysql/" itemprop="url" rel="index">
                    <span itemprop="name">mysql</span>
                  </a>
                </span>
            </span>

          
            <span id="/2019/03/02/mysql/%E8%AF%A6%E8%A7%A3mysql/" class="post-meta-item leancloud_visitors" data-flag-title="详解mysql 获取当前日期及格式化" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="MySQL-获取当前日期及日期格式"><a href="#MySQL-获取当前日期及日期格式" class="headerlink" title="MySQL 获取当前日期及日期格式"></a>MySQL 获取当前日期及日期格式</h1><p>获取系统日期： NOW()</p>
<p>格式化日期： DATE_FORMAT(date, format)</p>
<p>注： date：时间字段</p>
<p>format：日期格式</p>
<p>返回系统日期,输出 2009-12-25 14:38:59</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">now</span>();</span><br></pre></td></tr></table></figure>

<p>输出 09-12-25</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">date_format</span>(<span class="keyword">now</span>(),<span class="string">'%y-%m-%d'</span>);</span><br></pre></td></tr></table></figure>

<p>根据 format 字符串格式化 date 值:</p>
<ul>
<li>%S, %s 两位数字形式的秒（ 00,01, …, 59）</li>
<li>%I, %i 两位数字形式的分（ 00,01, …, 59）</li>
<li>%H 两位数字形式的小时，24 小时（00,01, …, 23）</li>
<li>%h 两位数字形式的小时，12 小时（01,02, …, 12）</li>
<li>%k 数字形式的小时，24 小时（0,1, …, 23）</li>
<li>%l 数字形式的小时，12 小时（1, 2, …, 12）</li>
<li>%T 24 小时的时间形式（hh:mm:ss）</li>
<li>%r 12 小时的时间形式（hh:mm:ss AM 或 hh:mm:ss PM）</li>
<li>%p AM 或 PM</li>
<li>%W 一周中每一天的名称（Sunday, Monday, …, Saturday）</li>
<li>%a 一周中每一天名称的缩写（Sun, Mon, …, Sat）</li>
<li>%d 两位数字表示月中的天数（00, 01,…, 31）</li>
<li>%e 数字形式表示月中的天数（1, 2， …, 31）</li>
<li>%D 英文后缀表示月中的天数（1st, 2nd, 3rd,…）</li>
<li>%w 以数字形式表示周中的天数（ 0 = Sunday, 1=Monday, …, 6=Saturday）</li>
<li>%j 以三位数字表示年中的天数（ 001, 002, …, 366）</li>
<li>%U 周（0, 1, 52），其中 Sunday 为周中的第一天</li>
<li>%u 周（0, 1, 52），其中 Monday 为周中的第一天</li>
<li>%M 月名（January, February, …, December）</li>
<li>%b 缩写的月名（ January, February,…., December）</li>
<li>%m 两位数字表示的月份（01, 02, …, 12）</li>
<li>%c 数字表示的月份（1, 2, …., 12）</li>
<li>%Y 四位数字表示的年份</li>
<li>%y 两位数字表示的年份</li>
<li>%% 直接值“%”</li>
</ul>
<h1 id="MySQL-获得当前日期时间-函数"><a href="#MySQL-获得当前日期时间-函数" class="headerlink" title="MySQL 获得当前日期时间 函数"></a>MySQL 获得当前日期时间 函数</h1><h2 id="获得当前日期-时间（date-time）函数：now"><a href="#获得当前日期-时间（date-time）函数：now" class="headerlink" title="获得当前日期+时间（date + time）函数：now()"></a>获得当前日期+时间（date + time）函数：now()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select now();</span><br><span class="line"></span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">| now() |</span><br><span class="line">+<span class="comment">---------------------+</span></span><br><span class="line">| 2008-08-08 22:20:46 |</span><br><span class="line">+<span class="comment">---------------------+</span></span><br></pre></td></tr></table></figure>

<p>除了 now() 函数能获得当前的日期时间外，MySQL 中还有下面的函数：</p>
<ol>
<li>current_timestamp()</li>
<li>,current_timestamp</li>
<li>,localtime()</li>
<li>,localtime</li>
<li>,localtimestamp – (v4.0.6)</li>
<li>,localtimestamp() – (v4.0.6)</li>
</ol>
<p>这些日期时间函数，都等同于 now()。鉴于 now() 函数简短易记，建议总是使用 now() 来替代上面列出的函数。</p>
<h2 id="获得当前日期-时间（date-time）函数：sysdate"><a href="#获得当前日期-时间（date-time）函数：sysdate" class="headerlink" title="获得当前日期+时间（date + time）函数：sysdate()"></a>获得当前日期+时间（date + time）函数：sysdate()</h2><p>sysdate() 日期时间函数跟 now() 类似，不同之处在于：now() 在执行开始时值就得到了， sysdate() 在函数执行时动态得到值。看下面的例子就明白了：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select now(), sleep(3), now();</span><br><span class="line"></span><br><span class="line">+<span class="comment">---------------------+----------+---------------------+</span></span><br><span class="line">| now() | sleep(3) | now() |</span><br><span class="line">+<span class="comment">---------------------+----------+---------------------+</span></span><br><span class="line">| 2008-08-08 22:28:21 | 0 | 2008-08-08 22:28:21 |</span><br><span class="line">+<span class="comment">---------------------+----------+---------------------+mysql&gt; select sysdate(), sleep(3), sysdate();</span></span><br><span class="line"></span><br><span class="line">+<span class="comment">---------------------+----------+---------------------+</span></span><br><span class="line">| sysdate() | sleep(3) | sysdate() |</span><br><span class="line">+<span class="comment">---------------------+----------+---------------------+</span></span><br><span class="line">| 2008-08-08 22:28:41 | 0 | 2008-08-08 22:28:44 |</span><br><span class="line">+<span class="comment">---------------------+----------+---------------------+</span></span><br></pre></td></tr></table></figure>

<p>可以看到，虽然中途 sleep 3 秒，但 now() 函数两次的时间值是相同的； sysdate() 函数两次得到的时间值相差 3 秒。MySQL Manual 中是这样描述 sysdate() 的：Return the time at which the functionexecutes。</p>
<p>sysdate() 日期时间函数，一般情况下很少用到。</p>
<h2 id="获得当前日期（date）函数：curdate"><a href="#获得当前日期（date）函数：curdate" class="headerlink" title="获得当前日期（date）函数：curdate()"></a>获得当前日期（date）函数：curdate()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select curdate();</span><br><span class="line"></span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| curdate() |</span><br><span class="line">+<span class="comment">------------+</span></span><br><span class="line">| 2008-08-08 |</span><br><span class="line">+<span class="comment">------------+</span></span><br></pre></td></tr></table></figure>

<p>其中，下面的两个日期函数等同于 curdate()：</p>
<p>current_date()</p>
<p>,current_date</p>
<h2 id="获得当前时间（time）函数：curtime"><a href="#获得当前时间（time）函数：curtime" class="headerlink" title="获得当前时间（time）函数：curtime()"></a>获得当前时间（time）函数：curtime()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select curtime();</span><br><span class="line"></span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| curtime() |</span><br><span class="line">+<span class="comment">-----------+</span></span><br><span class="line">| 22:41:30 |</span><br><span class="line">+<span class="comment">-----------+</span></span><br></pre></td></tr></table></figure>

<p>其中，下面的两个时间函数等同于 curtime()：</p>
<p>current_time()</p>
<p>,current_time</p>
<h2 id="获得当前-UTC-日期时间函数：utc-date-utc-time-utc-timestamp"><a href="#获得当前-UTC-日期时间函数：utc-date-utc-time-utc-timestamp" class="headerlink" title="获得当前 UTC 日期时间函数：utc_date(), utc_time(), utc_timestamp()"></a>获得当前 UTC 日期时间函数：utc_date(), utc_time(), utc_timestamp()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select utc_timestamp(), utc_date(), utc_time(), now()</span><br><span class="line"></span><br><span class="line">+<span class="comment">---------------------+------------+------------+---------------------+</span></span><br><span class="line">| utc_timestamp() | utc_date() | utc_time() | now() |</span><br><span class="line">+<span class="comment">---------------------+------------+------------+---------------------+</span></span><br><span class="line">| 2008-08-08 14:47:11 | 2008-08-08 | 14:47:11 | 2008-08-08 22:47:11 |</span><br><span class="line">+<span class="comment">---------------------+------------+------------+---------------------+</span></span><br></pre></td></tr></table></figure>

<p>因为我国位于东八时区，所以本地时间 = UTC 时间 + 8 小时。UTC 时间在业务涉及多个国家和地区的时候，非常有用。</p>
<h1 id="MySQL-日期时间-Extract（选取）-函数。"><a href="#MySQL-日期时间-Extract（选取）-函数。" class="headerlink" title="MySQL 日期时间 Extract（选取） 函数。"></a>MySQL 日期时间 Extract（选取） 函数。</h1><h2 id="选取日期时间的各个部分：日期、时间、年、季度、月、日、小时、分钟、秒、微秒"><a href="#选取日期时间的各个部分：日期、时间、年、季度、月、日、小时、分钟、秒、微秒" class="headerlink" title="选取日期时间的各个部分：日期、时间、年、季度、月、日、小时、分钟、秒、微秒"></a>选取日期时间的各个部分：日期、时间、年、季度、月、日、小时、分钟、秒、微秒</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @dt = <span class="string">'2008-09-10 07:15:30.123456'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">date</span>(@dt); <span class="comment">-- 2008-09-10</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">time</span>(@dt); <span class="comment">-- 07:15:30.123456</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(@dt); <span class="comment">-- 2008</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">quarter</span>(@dt); <span class="comment">-- 3</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">month</span>(@dt); <span class="comment">-- 9</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">week</span>(@dt); <span class="comment">-- 36</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">day</span>(@dt); <span class="comment">-- 10</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">hour</span>(@dt); <span class="comment">-- 7</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">minute</span>(@dt); <span class="comment">-- 15</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">second</span>(@dt); <span class="comment">-- 30</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">microsecond</span>(@dt); <span class="comment">-- 123456</span></span><br></pre></td></tr></table></figure>

<h2 id="MySQL-Extract-函数，可以上面实现类似的功能："><a href="#MySQL-Extract-函数，可以上面实现类似的功能：" class="headerlink" title="MySQL Extract() 函数，可以上面实现类似的功能："></a>MySQL Extract() 函数，可以上面实现类似的功能：</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @dt = <span class="string">'2008-09-10 07:15:30.123456'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(<span class="keyword">year</span> <span class="keyword">from</span> @dt); <span class="comment">-- 2008</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(<span class="keyword">quarter</span> <span class="keyword">from</span> @dt); <span class="comment">-- 3</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(<span class="keyword">month</span> <span class="keyword">from</span> @dt); <span class="comment">-- 9</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(<span class="keyword">week</span> <span class="keyword">from</span> @dt); <span class="comment">-- 36</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(<span class="keyword">day</span> <span class="keyword">from</span> @dt); <span class="comment">-- 10</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(<span class="keyword">hour</span> <span class="keyword">from</span> @dt); <span class="comment">-- 7</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(<span class="keyword">minute</span> <span class="keyword">from</span> @dt); <span class="comment">-- 15</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(<span class="keyword">second</span> <span class="keyword">from</span> @dt); <span class="comment">-- 30</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(<span class="keyword">microsecond</span> <span class="keyword">from</span> @dt); <span class="comment">-- 123456select extract(year_month from @dt); -- 200809</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(day_hour <span class="keyword">from</span> @dt); <span class="comment">-- 1007</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(day_minute <span class="keyword">from</span> @dt); <span class="comment">-- 100715</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(day_second <span class="keyword">from</span> @dt); <span class="comment">-- 10071530</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(day_microsecond <span class="keyword">from</span> @dt); <span class="comment">-- 10071530123456</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(hour_minute <span class="keyword">from</span> @dt); <span class="comment">-- 715</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(hour_second <span class="keyword">from</span> @dt); <span class="comment">-- 71530</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(hour_microsecond <span class="keyword">from</span> @dt); <span class="comment">-- 71530123456</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(minute_second <span class="keyword">from</span> @dt); <span class="comment">-- 1530</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(minute_microsecond <span class="keyword">from</span> @dt); <span class="comment">-- 1530123456</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">extract</span>(second_microsecond <span class="keyword">from</span> @dt); <span class="comment">-- 30123456</span></span><br></pre></td></tr></table></figure>

<p>MySQLExtract() 函数除了没有 date(),time() 的功能外，其他功能一应具全。并且还具有选取‘day_microsecond’等功能。注意这里不是只选取 day 和 microsecond，而是从日期的 day 部分一直选取到 microsecond 部分。够强悍的吧！</p>
<p>MySQL Extract() 函数唯一不好的地方在于：你需要多敲几次键盘。</p>
<h2 id="MySQL-dayof…-函数：dayofweek-dayofmonth-dayofyear"><a href="#MySQL-dayof…-函数：dayofweek-dayofmonth-dayofyear" class="headerlink" title="MySQL dayof… 函数：dayofweek(), dayofmonth(), dayofyear()"></a>MySQL dayof… 函数：dayofweek(), dayofmonth(), dayofyear()</h2><p>分别返回日期参数，在一周、一月、一年中的位置。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @dt = <span class="string">'2008-08-08'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">dayofweek</span>(@dt); <span class="comment">-- 6</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">dayofmonth</span>(@dt); <span class="comment">-- 8</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">dayofyear</span>(@dt); <span class="comment">-- 221</span></span><br></pre></td></tr></table></figure>

<p>日期 ‘2008-08-08′ 是一周中的第 6 天（1 = Sunday, 2 = Monday, …, 7 = Saturday）；一月中的第 8 天；一年中的第 221 天。</p>
<h2 id="MySQL-week…-函数：week-weekofyear-dayofweek-weekday-yearweek"><a href="#MySQL-week…-函数：week-weekofyear-dayofweek-weekday-yearweek" class="headerlink" title="MySQL week… 函数：week(), weekofyear(), dayofweek(), weekday(), yearweek()"></a>MySQL week… 函数：week(), weekofyear(), dayofweek(), weekday(), yearweek()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @dt = <span class="string">'2008-08-08'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">week</span>(@dt); <span class="comment">-- 31</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">week</span>(@dt,<span class="number">3</span>); <span class="comment">-- 32</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">weekofyear</span>(@dt); <span class="comment">-- 32</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">dayofweek</span>(@dt); <span class="comment">-- 6</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">weekday</span>(@dt); <span class="comment">-- 4</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">yearweek</span>(@dt); <span class="comment">-- 200831</span></span><br></pre></td></tr></table></figure>

<p>MySQL week() 函数，可以有两个参数，具体可看手册。 weekofyear() 和 week() 一样，都是计算“某天”是位于一年中的第几周。 weekofyear(@dt) 等价于 week(@dt,3)。</p>
<p>MySQLweekday() 函数和 dayofweek() 类似，都是返回“某天”在一周中的位置。不同点在于参考的标准， weekday：(0 =Monday, 1 = Tuesday, …, 6 = Sunday)； dayofweek：（1 = Sunday, 2 = Monday,…, 7 = Saturday）</p>
<p>MySQL yearweek() 函数，返回 year(2008) + week 位置(31)。</p>
<h2 id="MySQL-返回星期和月份名称函数：dayname-monthname"><a href="#MySQL-返回星期和月份名称函数：dayname-monthname" class="headerlink" title="MySQL 返回星期和月份名称函数：dayname(), monthname()"></a>MySQL 返回星期和月份名称函数：dayname(), monthname()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @dt = <span class="string">'2008-08-08'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">dayname</span>(@dt); <span class="comment">-- Friday</span></span><br><span class="line"><span class="keyword">select</span> monthname(@dt); <span class="comment">-- August</span></span><br></pre></td></tr></table></figure>

<p>思考，如何返回中文的名称呢？</p>
<h2 id="MySQL-last-day-函数：返回月份中的最后一天。"><a href="#MySQL-last-day-函数：返回月份中的最后一天。" class="headerlink" title="MySQL last_day() 函数：返回月份中的最后一天。"></a>MySQL last_day() 函数：返回月份中的最后一天。</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">last_day</span>(<span class="string">'2008-02-01'</span>); <span class="comment">-- 2008-02-29</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">last_day</span>(<span class="string">'2008-08-08'</span>); <span class="comment">-- 2008-08-31</span></span><br></pre></td></tr></table></figure>

<p>MySQL last_day() 函数非常有用，比如我想得到当前月份中有多少天，可以这样来计算：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select now(), day(last_day(now())) as days;</span><br><span class="line"></span><br><span class="line">+<span class="comment">---------------------+------+</span></span><br><span class="line">| now() | days |</span><br><span class="line">+<span class="comment">---------------------+------+</span></span><br><span class="line">| 2008-08-09 11:45:45 | 31 |</span><br><span class="line">+<span class="comment">---------------------+------+</span></span><br></pre></td></tr></table></figure>

<h1 id="MySQL-日期时间计算函数"><a href="#MySQL-日期时间计算函数" class="headerlink" title="MySQL 日期时间计算函数"></a>MySQL 日期时间计算函数</h1><h2 id="MySQL-为日期增加一个时间间隔：date-add"><a href="#MySQL-为日期增加一个时间间隔：date-add" class="headerlink" title="MySQL 为日期增加一个时间间隔：date_add()"></a>MySQL 为日期增加一个时间间隔：date_add()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> @dt = <span class="keyword">now</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">day</span>); <span class="comment">-- add 1 day</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">hour</span>); <span class="comment">-- add 1 hour</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">minute</span>); <span class="comment">-- ...</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">second</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">microsecond</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">week</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">month</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">quarter</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">year</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(@dt, <span class="built_in">interval</span> <span class="number">-1</span> <span class="keyword">day</span>); <span class="comment">-- sub 1 day</span></span><br></pre></td></tr></table></figure>

<p>MySQL adddate(), addtime()函数，可以用 date_add() 来替代。下面是 date_add() 实现 addtime() 功能示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set @dt = '2008-08-09 12:12:33';</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br><span class="line">mysql&gt; select date_add(@dt, interval '01:15:30' hour_second);</span><br><span class="line"></span><br><span class="line">+<span class="comment">------------------------------------------------+</span></span><br><span class="line">| date_add(@dt, interval '01:15:30' hour_second) |</span><br><span class="line">+<span class="comment">------------------------------------------------+</span></span><br><span class="line">| 2008-08-09 13:28:03 |</span><br><span class="line">+<span class="comment">------------------------------------------------+mysql&gt; select date_add(@dt, interval '1 01:15:30' day_second);</span></span><br><span class="line"></span><br><span class="line">+<span class="comment">-------------------------------------------------+</span></span><br><span class="line">| date_add(@dt, interval '1 01:15:30' day_second) |</span><br><span class="line">+<span class="comment">-------------------------------------------------+</span></span><br><span class="line">| 2008-08-10 13:28:03 |</span><br><span class="line">+<span class="comment">-------------------------------------------------+</span></span><br></pre></td></tr></table></figure>

<p>date_add() 函数，分别为 @dt 增加了“1 小时 15 分 30 秒” 和 “1 天 1 小时 15 分 30 秒”。建议：总是使用 date_add() 日期时间函数来替代 adddate(), addtime()。</p>
<h2 id="MySQL-为日期减去一个时间间隔：date-sub"><a href="#MySQL-为日期减去一个时间间隔：date-sub" class="headerlink" title="MySQL 为日期减去一个时间间隔：date_sub()"></a>MySQL 为日期减去一个时间间隔：date_sub()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select date_sub('1998-01-01 00:00:00', interval '1 1:1:1' day_second);</span><br><span class="line"></span><br><span class="line">+<span class="comment">----------------------------------------------------------------+</span></span><br><span class="line">| date_sub('1998-01-01 00:00:00', interval '1 1:1:1' day_second) |</span><br><span class="line">+<span class="comment">----------------------------------------------------------------+</span></span><br><span class="line">| 1997-12-30 22:58:59 |</span><br><span class="line">+<span class="comment">----------------------------------------------------------------+</span></span><br></pre></td></tr></table></figure>

<p>MySQL date_sub() 日期时间函数 和 date_add() 用法一致，不再赘述。另外，MySQL 中还有两个函数 subdate(), subtime()，建议，用 date_sub() 来替代。</p>
<h2 id="MySQL-另类日期函数：period-add-P-N-period-diff-P1-P2"><a href="#MySQL-另类日期函数：period-add-P-N-period-diff-P1-P2" class="headerlink" title="MySQL 另类日期函数：period_add(P,N), period_diff(P1,P2)"></a>MySQL 另类日期函数：period_add(P,N), period_diff(P1,P2)</h2><p>函数参数“P” 的格式为“YYYYMM” 或者 “YYMM”，第二个参数“N” 表示增加或减去 N month（月）。</p>
<p>MySQL period_add(P,N)：日期加/减去 N 月。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select period_add(200808,2), period_add(20080808,-2)</span><br><span class="line"></span><br><span class="line">+<span class="comment">----------------------+-------------------------+</span></span><br><span class="line">| period_add(200808,2) | period_add(20080808,-2) |</span><br><span class="line">+<span class="comment">----------------------+-------------------------+</span></span><br><span class="line">| 200810 | 20080806 |</span><br><span class="line">+<span class="comment">----------------------+-------------------------+</span></span><br><span class="line">MySQL period_diff(P1,P2)：日期 P1-P2，返回 N 个月。</span><br><span class="line"></span><br><span class="line">mysql&gt; select period_diff(200808, 200801);</span><br><span class="line"></span><br><span class="line">+<span class="comment">-----------------------------+</span></span><br><span class="line">| period_diff(200808, 200801) |</span><br><span class="line">+<span class="comment">-----------------------------+</span></span><br><span class="line">| 7 |</span><br><span class="line">+<span class="comment">-----------------------------+</span></span><br></pre></td></tr></table></figure>

<p>在 MySQL 中，这两个日期函数，一般情况下很少用到。</p>
<h2 id="MySQL-日期、时间相减函数：datediff-date1-date2-timediff-time1-time2"><a href="#MySQL-日期、时间相减函数：datediff-date1-date2-timediff-time1-time2" class="headerlink" title="MySQL 日期、时间相减函数：datediff(date1,date2), timediff(time1,time2)"></a>MySQL 日期、时间相减函数：datediff(date1,date2), timediff(time1,time2)</h2><p>MySQL datediff(date1,date2)：两个日期相减 date1 - date2，返回天数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">datediff</span>(<span class="string">'2008-08-08'</span>, <span class="string">'2008-08-01'</span>); <span class="comment">-- 7</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">datediff</span>(<span class="string">'2008-08-01'</span>, <span class="string">'2008-08-08'</span>); <span class="comment">-- -7</span></span><br></pre></td></tr></table></figure>

<p>MySQL timediff(time1,time2)：两个日期相减 time1 - time2，返回 time 差值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">timediff</span>(<span class="string">'2008-08-08 08:08:08'</span>, <span class="string">'2008-08-08 00:00:00'</span>); <span class="comment">-- 08:08:08</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">timediff</span>(<span class="string">'08:08:08'</span>, <span class="string">'00:00:00'</span>); <span class="comment">-- 08:08:08</span></span><br></pre></td></tr></table></figure>

<p>注意：timediff(time1,time2) 函数的两个参数类型必须相同。</p>
<h1 id="MySQL-日期转换函数、时间转换函数"><a href="#MySQL-日期转换函数、时间转换函数" class="headerlink" title="MySQL 日期转换函数、时间转换函数"></a>MySQL 日期转换函数、时间转换函数</h1><h2 id="MySQL-（时间、秒）转换函数：time-to-sec-time-sec-to-time-seconds"><a href="#MySQL-（时间、秒）转换函数：time-to-sec-time-sec-to-time-seconds" class="headerlink" title="MySQL （时间、秒）转换函数：time_to_sec(time), sec_to_time(seconds)"></a>MySQL （时间、秒）转换函数：time_to_sec(time), sec_to_time(seconds)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> time_to_sec(<span class="string">'01:00:05'</span>); <span class="comment">-- 3605</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">sec_to_time</span>(<span class="number">3605</span>); <span class="comment">-- '01:00:05'</span></span><br></pre></td></tr></table></figure>

<h2 id="MySQL-（日期、天数）转换函数：to-days-date-from-days-days"><a href="#MySQL-（日期、天数）转换函数：to-days-date-from-days-days" class="headerlink" title="MySQL （日期、天数）转换函数：to_days(date), from_days(days)"></a>MySQL （日期、天数）转换函数：to_days(date), from_days(days)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">to_days</span>(<span class="string">'0000-00-00'</span>); <span class="comment">-- 0</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">to_days</span>(<span class="string">'2008-08-08'</span>); <span class="comment">-- 733627</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">from_days</span>(<span class="number">0</span>); <span class="comment">-- '0000-00-00'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">from_days</span>(<span class="number">733627</span>); <span class="comment">-- '2008-08-08'</span></span><br></pre></td></tr></table></figure>

<h2 id="MySQL-Str-to-Date-（字符串转换为日期）函数：str-to-date-str-format"><a href="#MySQL-Str-to-Date-（字符串转换为日期）函数：str-to-date-str-format" class="headerlink" title="MySQL Str to Date （字符串转换为日期）函数：str_to_date(str, format)"></a>MySQL Str to Date （字符串转换为日期）函数：str_to_date(str, format)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">str_to_date</span>(<span class="string">'08/09/2008'</span>, <span class="string">'%m/%d/%Y'</span>); <span class="comment">-- 2008-08-09</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">str_to_date</span>(<span class="string">'08/09/08'</span> , <span class="string">'%m/%d/%y'</span>); <span class="comment">-- 2008-08-09</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">str_to_date</span>(<span class="string">'08.09.2008'</span>, <span class="string">'%m.%d.%Y'</span>); <span class="comment">-- 2008-08-09</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">str_to_date</span>(<span class="string">'08:09:30'</span>, <span class="string">'%h:%i:%s'</span>); <span class="comment">-- 08:09:30</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">str_to_date</span>(<span class="string">'08.09.2008 08:09:30'</span>, <span class="string">'%m.%d.%Y %h:%i:%s'</span>); <span class="comment">-- 2008-08-09 08:09:30</span></span><br></pre></td></tr></table></figure>

<p>可以看到，str_to_date(str,format) 转换函数，可以把一些杂乱无章的字符串转换为日期格式。另外，它也可以转换为时间。“format” 可以参看 MySQL 手册。</p>
<h2 id="MySQL-Date-Time-to-Str（日期-时间转换为字符串）函数：date-format-date-format-time-format-time-format"><a href="#MySQL-Date-Time-to-Str（日期-时间转换为字符串）函数：date-format-date-format-time-format-time-format" class="headerlink" title="MySQL Date/Time to Str（日期/时间转换为字符串）函数：date_format(date,format), time_format(time,format)"></a>MySQL Date/Time to Str（日期/时间转换为字符串）函数：date_format(date,format), time_format(time,format)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select date_format('2008-08-08 22:23:00', '%W %M %Y');</span><br><span class="line"></span><br><span class="line">+<span class="comment">------------------------------------------------+</span></span><br><span class="line">| date_format('2008-08-08 22:23:00', '%W %M %Y') |</span><br><span class="line">+<span class="comment">------------------------------------------------+</span></span><br><span class="line">| Friday August 2008 |</span><br><span class="line">+<span class="comment">------------------------------------------------+mysql&gt; select date_format('2008-08-08 22:23:01', '%Y%m%d%H%i%s');</span></span><br><span class="line"></span><br><span class="line">+<span class="comment">----------------------------------------------------+</span></span><br><span class="line">| date_format('2008-08-08 22:23:01', '%Y%m%d%H%i%s') |</span><br><span class="line">+<span class="comment">----------------------------------------------------+</span></span><br><span class="line">| 20080808222301 |</span><br><span class="line">+<span class="comment">----------------------------------------------------+mysql&gt; select time_format('22:23:01', '%H.%i.%s');</span></span><br><span class="line"></span><br><span class="line">+<span class="comment">-------------------------------------+</span></span><br><span class="line">| time_format('22:23:01', '%H.%i.%s') |</span><br><span class="line">+<span class="comment">-------------------------------------+</span></span><br><span class="line">| 22.23.01 |</span><br><span class="line">+<span class="comment">-------------------------------------+</span></span><br></pre></td></tr></table></figure>

<p>MySQL 日期、时间转换函数：date_format(date,format), time_format(time,format) 能够把一个日期/时间转换成各种各样的字符串格式。它是 str_to_date(str,format) 函数的 一个逆转换。</p>
<h2 id="MySQL-获得国家地区时间格式函数：get-format"><a href="#MySQL-获得国家地区时间格式函数：get-format" class="headerlink" title="MySQL 获得国家地区时间格式函数：get_format()"></a>MySQL 获得国家地区时间格式函数：get_format()</h2><p>MySQL get_format() 语法：</p>
<p>get_format(date|time|datetime, ‘eur’|’usa’|’jis’|’iso’|’internal’</p>
<p>MySQL get_format() 用法的全部示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">date</span>,<span class="string">'usa'</span>) ; <span class="comment">-- '%m.%d.%Y'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">date</span>,<span class="string">'jis'</span>) ; <span class="comment">-- '%Y-%m-%d'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">date</span>,<span class="string">'iso'</span>) ; <span class="comment">-- '%Y-%m-%d'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">date</span>,<span class="string">'eur'</span>) ; <span class="comment">-- '%d.%m.%Y'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">date</span>,<span class="string">'internal'</span>) ; <span class="comment">-- '%Y%m%d'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(datetime,<span class="string">'usa'</span>) ; <span class="comment">-- '%Y-%m-%d %H.%i.%s'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(datetime,<span class="string">'jis'</span>) ; <span class="comment">-- '%Y-%m-%d %H:%i:%s'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(datetime,<span class="string">'iso'</span>) ; <span class="comment">-- '%Y-%m-%d %H:%i:%s'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(datetime,<span class="string">'eur'</span>) ; <span class="comment">-- '%Y-%m-%d %H.%i.%s'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(datetime,<span class="string">'internal'</span>) ; <span class="comment">-- '%Y%m%d%H%i%s'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">time</span>,<span class="string">'usa'</span>) ; <span class="comment">-- '%h:%i:%s %p'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">time</span>,<span class="string">'jis'</span>) ; <span class="comment">-- '%H:%i:%s'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">time</span>,<span class="string">'iso'</span>) ; <span class="comment">-- '%H:%i:%s'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">time</span>,<span class="string">'eur'</span>) ; <span class="comment">-- '%H.%i.%s'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">get_format</span>(<span class="built_in">time</span>,<span class="string">'internal'</span>) ; <span class="comment">-- '%H%i%s'</span></span><br></pre></td></tr></table></figure>

<p>MySQL get_format() 函数在实际中用到机会的比较少。</p>
<h2 id="MySQL-拼凑日期、时间函数：makedate-year-dayofyear-maketime-hour-minute-second"><a href="#MySQL-拼凑日期、时间函数：makedate-year-dayofyear-maketime-hour-minute-second" class="headerlink" title="MySQL 拼凑日期、时间函数：makedate(year,dayofyear), maketime(hour,minute,second)"></a>MySQL 拼凑日期、时间函数：makedate(year,dayofyear), maketime(hour,minute,second)</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">makedate</span>(<span class="number">2001</span>,<span class="number">31</span>); <span class="comment">-- '2001-01-31'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">makedate</span>(<span class="number">2001</span>,<span class="number">32</span>); <span class="comment">-- '2001-02-01'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">maketime</span>(<span class="number">12</span>,<span class="number">15</span>,<span class="number">30</span>); <span class="comment">-- '12:15:30'</span></span><br></pre></td></tr></table></figure>

<h1 id="MySQL-时间戳（Timestamp）函数"><a href="#MySQL-时间戳（Timestamp）函数" class="headerlink" title="MySQL 时间戳（Timestamp）函数"></a>MySQL 时间戳（Timestamp）函数</h1><h2 id="MySQL-获得当前时间戳函数：current-timestamp-current-timestamp"><a href="#MySQL-获得当前时间戳函数：current-timestamp-current-timestamp" class="headerlink" title="MySQL 获得当前时间戳函数：current_timestamp, current_timestamp()"></a>MySQL 获得当前时间戳函数：current_timestamp, current_timestamp()</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; select current_timestamp, current_timestamp();</span><br><span class="line"></span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| current_timestamp | current_timestamp() |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br><span class="line">| 2008-08-09 23:22:24 | 2008-08-09 23:22:24 |</span><br><span class="line">+<span class="comment">---------------------+---------------------+</span></span><br></pre></td></tr></table></figure>

<h2 id="MySQL-（Unix-时间戳、日期）转换函数："><a href="#MySQL-（Unix-时间戳、日期）转换函数：" class="headerlink" title="MySQL （Unix 时间戳、日期）转换函数："></a>MySQL （Unix 时间戳、日期）转换函数：</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">unix_timestamp(),</span><br><span class="line">unix_timestamp(date),</span><br><span class="line">from_unixtime(unix_timestamp),</span><br><span class="line">from_unixtime(unix_timestamp,format)</span><br></pre></td></tr></table></figure>

<p>下面是示例：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">unix_timestamp</span>(); <span class="comment">-- 1218290027</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">unix_timestamp</span>(<span class="string">'2008-08-08'</span>); <span class="comment">-- 1218124800</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">unix_timestamp</span>(<span class="string">'2008-08-08 12:30:00'</span>); <span class="comment">-- 1218169800</span></span><br><span class="line"><span class="keyword">select</span> from_unixtime(<span class="number">1218290027</span>); <span class="comment">-- '2008-08-09 21:53:47'</span></span><br><span class="line"><span class="keyword">select</span> from_unixtime(<span class="number">1218124800</span>); <span class="comment">-- '2008-08-08 00:00:00'</span></span><br><span class="line"><span class="keyword">select</span> from_unixtime(<span class="number">1218169800</span>); <span class="comment">-- '2008-08-08 12:30:00'</span></span><br><span class="line"><span class="keyword">select</span> from_unixtime(<span class="number">1218169800</span>, <span class="string">'%Y %D %M %h:%i:%s %x'</span>); <span class="comment">-- '2008 8th August12:30:00 2008'</span></span><br></pre></td></tr></table></figure>

<h2 id="MySQL-时间戳（timestamp）转换、增、减函数："><a href="#MySQL-时间戳（timestamp）转换、增、减函数：" class="headerlink" title="MySQL 时间戳（timestamp）转换、增、减函数："></a>MySQL 时间戳（timestamp）转换、增、减函数：</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">timestamp(date) <span class="comment">-- date to timestamp</span></span><br><span class="line">timestamp(dt,time) <span class="comment">-- dt + time</span></span><br><span class="line">timestampadd(unit,interval,datetime_expr) <span class="comment">--</span></span><br><span class="line">timestampdiff(unit,datetime_expr1,datetime_expr2) <span class="comment">--</span></span><br></pre></td></tr></table></figure>

<p>请看示例部分：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">timestamp</span>(<span class="string">'2008-08-08'</span>); <span class="comment">-- 2008-08-08 00:00:00</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">timestamp</span>(<span class="string">'2008-08-08 08:00:00'</span>, <span class="string">'01:01:01'</span>); <span class="comment">-- 2008-08-08 09:01:01</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">timestamp</span>(<span class="string">'2008-08-08 08:00:00'</span>, <span class="string">'10 01:01:01'</span>); <span class="comment">-- 2008-08-1809:01:01</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">timestampadd</span>(<span class="keyword">day</span>, <span class="number">1</span>, <span class="string">'2008-08-08 08:00:00'</span>); <span class="comment">--2008-08-09 08:00:00</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(<span class="string">'2008-08-08 08:00:00'</span>, <span class="built_in">interval</span> <span class="number">1</span> <span class="keyword">day</span>); <span class="comment">-- 2008-08-09 08:00:00</span></span><br></pre></td></tr></table></figure>

<p>MySQL timestampadd() 函数类似于 date_add()。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">timestampdiff</span>(<span class="keyword">year</span>,<span class="string">'2002-05-01'</span>,<span class="string">'2001-01-01'</span>); <span class="comment">-- -1</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">timestampdiff</span>(<span class="keyword">day</span> ,<span class="string">'2002-05-01'</span>,<span class="string">'2001-01-01'</span>); <span class="comment">-- -485</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">timestampdiff</span>(<span class="keyword">hour</span>,<span class="string">'2008-08-08 12:00:00'</span>,<span class="string">'2008-08-08 00:00:00'</span>); <span class="comment">-- -12</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">datediff</span>(<span class="string">'2008-08-08 12:00:00'</span>, <span class="string">'2008-08-01 00:00:00'</span>); <span class="comment">-- 7</span></span><br></pre></td></tr></table></figure>

<p>MySQL timestampdiff() 函数就比 datediff() 功能强多了，datediff() 只能计算两个日期（date）之间相差的天数。</p>
<h1 id="MySQL-时区（timezone）转换函数-convert-tz-dt-from-tz-to-tz"><a href="#MySQL-时区（timezone）转换函数-convert-tz-dt-from-tz-to-tz" class="headerlink" title="MySQL 时区（timezone）转换函数 convert_tz(dt,from_tz,to_tz)"></a>MySQL 时区（timezone）转换函数 convert_tz(dt,from_tz,to_tz)</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">convert_tz</span>(<span class="string">'2008-08-08 12:00:00'</span>, <span class="string">'+08:00'</span>, <span class="string">'+00:00'</span>); <span class="comment">-- 2008-08-0804:00:00</span></span><br></pre></td></tr></table></figure>

<p>时区转换也可以通过 date_add, date_sub, timestampadd 来实现。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">date_add</span>(<span class="string">'2008-08-08 12:00:00'</span>, <span class="built_in">interval</span> <span class="number">-8</span> <span class="keyword">hour</span>); <span class="comment">-- 2008-08-08 04:00:00</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_sub</span>(<span class="string">'2008-08-08 12:00:00'</span>, <span class="built_in">interval</span> <span class="number">8</span> <span class="keyword">hour</span>); <span class="comment">-- 2008-08-08 04:00:00</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">timestampadd</span>(<span class="keyword">hour</span>, <span class="number">-8</span>, <span class="string">'2008-08-08 12:00:00'</span>); <span class="comment">-- 2008-08-08 04:00:00</span></span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/mysql/" rel="tag"># mysql</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/03/01/myBatis/MyBatis%E6%9F%A5%E8%AF%A2%E8%BF%94%E5%9B%9E%E5%80%BCMap%E6%88%96List-Map/" rel="prev" title="MyBatis查询，返回值Map或List<Map>">
      <i class="fa fa-chevron-left"></i> MyBatis查询，返回值Map或List<Map>
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/03/03/java/Idea%E8%87%AA%E5%AE%9A%E4%B9%89%E8%AE%BE%E7%BD%AEJava%E6%96%B9%E6%B3%95%E6%B3%A8%E9%87%8A/" rel="next" title="Idea中自定义设置Java方法注释">
      Idea中自定义设置Java方法注释 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-获取当前日期及日期格式"><span class="nav-number">1.</span> <span class="nav-text">MySQL 获取当前日期及日期格式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-获得当前日期时间-函数"><span class="nav-number">2.</span> <span class="nav-text">MySQL 获得当前日期时间 函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#获得当前日期-时间（date-time）函数：now"><span class="nav-number">2.1.</span> <span class="nav-text">获得当前日期+时间（date + time）函数：now()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获得当前日期-时间（date-time）函数：sysdate"><span class="nav-number">2.2.</span> <span class="nav-text">获得当前日期+时间（date + time）函数：sysdate()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获得当前日期（date）函数：curdate"><span class="nav-number">2.3.</span> <span class="nav-text">获得当前日期（date）函数：curdate()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获得当前时间（time）函数：curtime"><span class="nav-number">2.4.</span> <span class="nav-text">获得当前时间（time）函数：curtime()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#获得当前-UTC-日期时间函数：utc-date-utc-time-utc-timestamp"><span class="nav-number">2.5.</span> <span class="nav-text">获得当前 UTC 日期时间函数：utc_date(), utc_time(), utc_timestamp()</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-日期时间-Extract（选取）-函数。"><span class="nav-number">3.</span> <span class="nav-text">MySQL 日期时间 Extract（选取） 函数。</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#选取日期时间的各个部分：日期、时间、年、季度、月、日、小时、分钟、秒、微秒"><span class="nav-number">3.1.</span> <span class="nav-text">选取日期时间的各个部分：日期、时间、年、季度、月、日、小时、分钟、秒、微秒</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-Extract-函数，可以上面实现类似的功能："><span class="nav-number">3.2.</span> <span class="nav-text">MySQL Extract() 函数，可以上面实现类似的功能：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-dayof…-函数：dayofweek-dayofmonth-dayofyear"><span class="nav-number">3.3.</span> <span class="nav-text">MySQL dayof… 函数：dayofweek(), dayofmonth(), dayofyear()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-week…-函数：week-weekofyear-dayofweek-weekday-yearweek"><span class="nav-number">3.4.</span> <span class="nav-text">MySQL week… 函数：week(), weekofyear(), dayofweek(), weekday(), yearweek()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-返回星期和月份名称函数：dayname-monthname"><span class="nav-number">3.5.</span> <span class="nav-text">MySQL 返回星期和月份名称函数：dayname(), monthname()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-last-day-函数：返回月份中的最后一天。"><span class="nav-number">3.6.</span> <span class="nav-text">MySQL last_day() 函数：返回月份中的最后一天。</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-日期时间计算函数"><span class="nav-number">4.</span> <span class="nav-text">MySQL 日期时间计算函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-为日期增加一个时间间隔：date-add"><span class="nav-number">4.1.</span> <span class="nav-text">MySQL 为日期增加一个时间间隔：date_add()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-为日期减去一个时间间隔：date-sub"><span class="nav-number">4.2.</span> <span class="nav-text">MySQL 为日期减去一个时间间隔：date_sub()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-另类日期函数：period-add-P-N-period-diff-P1-P2"><span class="nav-number">4.3.</span> <span class="nav-text">MySQL 另类日期函数：period_add(P,N), period_diff(P1,P2)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-日期、时间相减函数：datediff-date1-date2-timediff-time1-time2"><span class="nav-number">4.4.</span> <span class="nav-text">MySQL 日期、时间相减函数：datediff(date1,date2), timediff(time1,time2)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-日期转换函数、时间转换函数"><span class="nav-number">5.</span> <span class="nav-text">MySQL 日期转换函数、时间转换函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-（时间、秒）转换函数：time-to-sec-time-sec-to-time-seconds"><span class="nav-number">5.1.</span> <span class="nav-text">MySQL （时间、秒）转换函数：time_to_sec(time), sec_to_time(seconds)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-（日期、天数）转换函数：to-days-date-from-days-days"><span class="nav-number">5.2.</span> <span class="nav-text">MySQL （日期、天数）转换函数：to_days(date), from_days(days)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-Str-to-Date-（字符串转换为日期）函数：str-to-date-str-format"><span class="nav-number">5.3.</span> <span class="nav-text">MySQL Str to Date （字符串转换为日期）函数：str_to_date(str, format)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-Date-Time-to-Str（日期-时间转换为字符串）函数：date-format-date-format-time-format-time-format"><span class="nav-number">5.4.</span> <span class="nav-text">MySQL Date&#x2F;Time to Str（日期&#x2F;时间转换为字符串）函数：date_format(date,format), time_format(time,format)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-获得国家地区时间格式函数：get-format"><span class="nav-number">5.5.</span> <span class="nav-text">MySQL 获得国家地区时间格式函数：get_format()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-拼凑日期、时间函数：makedate-year-dayofyear-maketime-hour-minute-second"><span class="nav-number">5.6.</span> <span class="nav-text">MySQL 拼凑日期、时间函数：makedate(year,dayofyear), maketime(hour,minute,second)</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-时间戳（Timestamp）函数"><span class="nav-number">6.</span> <span class="nav-text">MySQL 时间戳（Timestamp）函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-获得当前时间戳函数：current-timestamp-current-timestamp"><span class="nav-number">6.1.</span> <span class="nav-text">MySQL 获得当前时间戳函数：current_timestamp, current_timestamp()</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-（Unix-时间戳、日期）转换函数："><span class="nav-number">6.2.</span> <span class="nav-text">MySQL （Unix 时间戳、日期）转换函数：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL-时间戳（timestamp）转换、增、减函数："><span class="nav-number">6.3.</span> <span class="nav-text">MySQL 时间戳（timestamp）转换、增、减函数：</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#MySQL-时区（timezone）转换函数-convert-tz-dt-from-tz-to-tz"><span class="nav-number">7.</span> <span class="nav-text">MySQL 时区（timezone）转换函数 convert_tz(dt,from_tz,to_tz)</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Andy Ge</p>
  <div class="site-description" itemprop="description">勇于积极进取，步入人生的世外桃源</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">728</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">134</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">315</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/andyge" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;andyge" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:geshaofei@126.com" title="E-Mail → mailto:geshaofei@126.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://www.ruanyifeng.com/" title="http:&#x2F;&#x2F;www.ruanyifeng.com&#x2F;" rel="noopener" target="_blank">阮一峰</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://colobu.com/" title="http:&#x2F;&#x2F;colobu.com&#x2F;" rel="noopener" target="_blank">鸟窝</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.cnblogs.com/hellokuangshen/" title="https:&#x2F;&#x2F;www.cnblogs.com&#x2F;hellokuangshen&#x2F;" rel="noopener" target="_blank">狂神</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://yelog.org/" title="https:&#x2F;&#x2F;yelog.org&#x2F;" rel="noopener" target="_blank">叶落阁</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Andy Ge</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.1
  </div>

        






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.getAttribute('data-flag-title');

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              Counter('post', '/classes/Counter', { title: title, url: url, time: 1 })
                .then(response => response.json())
                .then(() => {
                  leancloudSelector(url).innerText = 1;
                })
                .catch(error => {
                  console.error('Failed to create', error);
                });
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=2TdIb5gRlAVUw24l2W0zWnCj-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id'     : '2TdIb5gRlAVUw24l2W0zWnCj-gzGzoHsz',
            'X-LC-Key'    : 'cJdJrMLBXsj0ttq0WsL0aA2j',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
